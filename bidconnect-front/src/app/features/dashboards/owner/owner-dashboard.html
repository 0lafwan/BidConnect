<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div>
      <h1 class="dashboard-title">OWNER DASHBOARD</h1>
      <p class="dashboard-subtitle">Bienvenue, {{ currentUser()?.firstName }} {{ currentUser()?.lastName }}</p>
    </div>
    <button (click)="logout()" class="btn-logout">
      DÉCONNEXION
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <h3 class="stat-label">Mes Appels d'offres</h3>
      <p class="stat-value stat-accent">{{ tenders().length }}</p>
    </div>
    <div class="stat-card">
      <h3 class="stat-label">Publiés</h3>
      <p class="stat-value stat-neon">{{ getPublishedCount() }}</p>
    </div>
    <div class="stat-card">
      <h3 class="stat-label">Brouillons</h3>
      <p class="stat-value">{{ getDraftCount() }}</p>
    </div>
  </div>

  <!-- Message d'erreur global -->
  @if (errorMessage()) {
  <div class="error-banner">
    <svg class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span>{{ errorMessage() }}</span>
  </div>
  }

  <!-- Vue Liste -->
  <div class="content-section" [style.display]="viewState() === 'CREATE' ? 'none' : 'block'">
    <!-- Header de section -->
    <div class="section-header">
      <h2 class="section-title">MES APPELS D'OFFRES</h2>
      <button (click)="switchToCreate()" class="btn-primary">
        <svg class="btn-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        NOUVEAU PROJET
      </button>
    </div>

    <!-- Loading State -->
    <div class="loading-container" [style.display]="isLoading() ? 'flex' : 'none'">
      <div class="loading-spinner"></div>
      <p class="loading-text">Chargement des appels d'offres...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" [style.display]="!isLoading() && tenders().length === 0 ? 'flex' : 'none'">
      <svg class="empty-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
      </svg>
      <h3 class="empty-title">Aucun appel d'offres</h3>
      <p class="empty-text">Créez votre premier appel d'offres pour commencer</p>
      <button (click)="switchToCreate()" class="btn-primary mt-6">
        CRÉER UN APPEL D'OFFRES
      </button>
    </div>

    <!-- Table -->
    <div #tableContainer class="table-container"
      [style.display]="!isLoading() && tenders().length > 0 ? 'block' : 'none'">
      <table class="tender-table">
        <thead>
          <tr class="table-header-row">
            <th class="table-header">TITRE</th>
            <th class="table-header">DEADLINE</th>
            <th class="table-header">STATUT</th>
            <th class="table-header">CRITÈRES</th>
            <th class="table-header text-right">ACTIONS</th>
          </tr>
        </thead>
        <tbody>
          @for (tender of tenders(); track tender.id) {
          <tr class="tender-row" (click)="viewTenderDetails(tender.id)">
            <td class="table-cell">
              <div class="tender-title">{{ tender.title }}</div>
              <div class="tender-description">{{ tender.description }}</div>
            </td>
            <td class="table-cell">
              <div class="tender-deadline">{{ tender.deadline }}</div>
              @if (tender.publicationDate) {
              <div class="tender-pub-date">Publié le {{ tender.publicationDate }}</div>
              }
            </td>
            <td class="table-cell">
              <span class="status-badge" [ngClass]="getStatusClass(tender.status)">
                {{ getStatusLabel(tender.status) }}
              </span>
            </td>
            <td class="table-cell">
              <div class="criteria-list">
                @for (criterion of tender.criteria; track criterion.id) {
                <div class="criterion-item">
                  <span class="criterion-type">{{ criterion.type }}</span>
                  <span class="criterion-weight">{{ criterion.weight }}%</span>
                </div>
                }
              </div>
            </td>
            <td class="table-cell text-right">
              <div class="action-buttons">
                @if (tender.status === TenderStatus.DRAFT) {
                <button (click)="publishTender(tender.id, $event)" class="btn-action btn-publish" title="Publier">
                  <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </button>
                }
                @if (tender.status === TenderStatus.PUBLISHED) {
                <button (click)="closeTender(tender.id, $event)" class="btn-action btn-close" title="Clôturer">
                  <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
                }
                <button (click)="deleteTender(tender.id, $event)" class="btn-action btn-delete" title="Supprimer">
                  <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Vue Création -->
  <div #formContainer class="content-section" [style.display]="viewState() === 'CREATE' ? 'block' : 'none'">
    <div class="section-header">
      <h2 class="section-title">CRÉER UN NOUVEL APPEL D'OFFRES</h2>
      <button (click)="switchToList()" class="btn-secondary">
        <svg class="btn-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        ANNULER
      </button>
    </div>

    <form [formGroup]="tenderForm" (ngSubmit)="onSubmit()" class="tender-form">
      <!-- Section 1: Informations Générales -->
      <div class="form-section">
        <h3 class="text-xs uppercase tracking-widest text-brutal-neon mb-6 flex items-center gap-2">
          <span class="w-2 h-2 bg-brutal-neon"></span>
          1. Informations Générales
        </h3>

        <div class="space-y-6">
          <div class="form-group">
            <label class="form-label">Titre du projet</label>
            <input type="text" formControlName="title" class="form-input" [class.error]="hasError('title')"
              placeholder="Ex: Construction de la nouvelle marina">
            @if (hasError('title')) {
            <span class="field-error">{{ getErrorMessage('title') }}</span>
            }
          </div>

          <div class="form-group">
            <label class="form-label">Description détaillée</label>
            <textarea formControlName="description" rows="4" class="form-textarea"
              [class.error]="hasError('description')"
              placeholder="Décrivez les besoins, les objectifs et les contraintes du projet..."></textarea>
            @if (hasError('description')) {
            <span class="field-error">{{ getErrorMessage('description') }}</span>
            }
          </div>
        </div>
      </div>

      <!-- Section 2: Paramètres & Documents -->
      <div class="form-section">
        <h3 class="text-xs uppercase tracking-widest text-brutal-neon mb-6 flex items-center gap-2">
          <span class="w-2 h-2 bg-brutal-neon"></span>
          2. Paramètres & Documents
        </h3>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Date limite de soumission</label>
            <input type="date" formControlName="deadline" class="form-input" [class.error]="hasError('deadline')">
            @if (hasError('deadline')) {
            <span class="field-error">{{ getErrorMessage('deadline') }}</span>
            }
          </div>

          <div class="form-group">
            <label class="form-label">Documents de référence</label>
            <div class="file-drop-zone relative">
              <input type="file" (change)="onFileSelected($event)" multiple
                class="absolute inset-0 opacity-0 cursor-pointer" accept=".pdf,.doc,.docx,.xls,.xlsx" #fileInput>
              <div class="flex items-center justify-center gap-3 py-2 cursor-pointer" (click)="fileInput.click()">
                <svg class="w-5 h-5 text-white/40" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <span class="text-xs text-white/50">Cliquez pour ajouter des fichiers</span>
              </div>
            </div>
            @if (selectedFiles().length > 0) {
            <div class="mt-2 text-xs text-brutal-neon">
              {{ selectedFiles().length }} fichier(s) sélectionné(s)
            </div>
            }
          </div>
        </div>
      </div>

      <!-- Section 3: Critères d'Évaluation -->
      <div class="form-section">
        <h3 class="text-xs uppercase tracking-widest text-brutal-neon mb-6 flex items-center gap-2">
          <span class="w-2 h-2 bg-brutal-neon"></span>
          3. Critères d'Évaluation
        </h3>

        <p class="text-xs text-white/50 mb-6 italic">
          Définissez l'importance relative de chaque critère. Le total doit être égal à 100%.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="form-group">
            <label class="form-label text-[10px] opacity-60">Prix (%)</label>
            <input type="number" formControlName="priceWeight" class="form-input"
              [class.error]="hasError('priceWeight')" placeholder="40">
          </div>
          <div class="form-group">
            <label class="form-label text-[10px] opacity-60">Qualité Technique (%)</label>
            <input type="number" formControlName="technicalWeight" class="form-input"
              [class.error]="hasError('technicalWeight')" placeholder="35">
          </div>
          <div class="form-group">
            <label class="form-label text-[10px] opacity-60">Délai de Livraison (%)</label>
            <input type="number" formControlName="deliveryWeight" class="form-input"
              [class.error]="hasError('deliveryWeight')" placeholder="25">
          </div>
        </div>

        <div class="flex items-center justify-between mt-8 p-4 bg-white/[0.03] border-l-4"
          [class.border-brutal-neon]="totalWeight === 100" [class.border-brutal-accent]="totalWeight !== 100">
          <div>
            <span class="text-[10px] uppercase tracking-widest opacity-50 block mb-1">Somme actuelle</span>
            <span class="text-lg font-mono font-bold" [class.text-brutal-neon]="totalWeight === 100"
              [class.text-brutal-accent]="totalWeight !== 100">
              {{ totalWeight }}%
            </span>
          </div>
          @if (totalWeight !== 100) {
          <span class="text-[10px] text-brutal-accent uppercase font-bold animate-pulse">
            Doit être égal à 100%
          </span>
          } @else {
          <span class="text-[10px] text-brutal-neon uppercase font-bold">
            Configuration Valide
          </span>
          }
        </div>
      </div>

      <div class="info-box mt-4">
        <svg class="info-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <h4 class="info-title">Pondération Personnalisée</h4>
          <p class="info-text">
            Vous avez le plein contrôle sur la pondération des critères. Ajustez les pourcentages ci-dessus selon vos
            priorités stratégiques.
          </p>
        </div>
      </div>

      <div class="form-actions mt-8">
        <button type="button" (click)="switchToList()" class="btn-cancel">
          ANNULER
        </button>
        <button type="submit" [disabled]="isLoading() || totalWeight !== 100" class="btn-submit">
          @if (isLoading()) {
          <div class="loading-spinner-sm"></div>
          CRÉATION EN COURS...
          } @else {
          CRÉER L'APPEL D'OFFRES
          }
        </button>
      </div>
    </form>
  </div>

  <!-- Vue Détails -->
  <div class="content-section" [style.display]="viewState() === 'DETAILS' ? 'block' : 'none'">
    @if (selectedTender()) {
    <div class="section-header">
      <h2 class="section-title">DÉTAILS : {{ selectedTender()!.title }}</h2>
      <div class="flex gap-3">
        <button (click)="viewTenderDetails(selectedTender()!.id)" class="btn-secondary">
          <svg class="btn-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          ACTUALISER
        </button>
        <button (click)="switchToList()" class="btn-secondary">
          <svg class="btn-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          RETOUR
        </button>
      </div>
    </div>

    <!-- Tender Summary -->
    <div class="tender-details-grid">
      <div class="details-card">
        <h3 class="details-card-title">INFORMATIONS GÉNÉRALES</h3>
        <div class="details-info-list">
          <div class="info-item">
            <span class="info-label">Statut</span>
            <span class="status-badge" [ngClass]="getStatusClass(selectedTender()!.status)">
              {{ getStatusLabel(selectedTender()!.status) }}
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">Date limite</span>
            <span class="info-value">{{ selectedTender()!.deadline }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Description</span>
            <p class="info-value-text">{{ selectedTender()!.description }}</p>
          </div>
        </div>
      </div>

      <div class="details-card">
        <h3 class="details-card-title">CRITÈRES DE SÉLECTION</h3>
        <div class="criteria-list-large">
          @for (criterion of selectedTender()!.criteria; track criterion.id) {
          <div class="criterion-item-large">
            <span class="criterion-name">{{ criterion.type }}</span>
            <div class="criterion-bar-bg">
              <div class="criterion-bar-fill" [style.width.%]="criterion.weight"></div>
            </div>
            <span class="criterion-value">{{ criterion.weight }}%</span>
          </div>
          }
        </div>
      </div>
    </div>

    <!-- Submissions List -->
    <div class="submissions-section mt-8">
      <h3 class="section-subtitle">SOUMISSIONS REÇUES ({{ submissions().length }})</h3>

      <div class="table-container mt-4">
        @if (submissions().length === 0) {
        <div class="empty-state-sm">
          <p>Aucune soumission n'a été reçue pour le moment.</p>
        </div>
        } @else {
        <table class="tender-table">
          <thead>
            <tr class="table-header-row">
              <th class="table-header">FOURNISSEUR</th>
              <th class="table-header">PRIX (€)</th>
              <th class="table-header">SCORE IA</th>
              <th class="table-header">ANALYSE RAG</th>
              <th class="table-header">STATUT</th>
              <th class="table-header text-right">ACTIONS</th>
            </tr>
          </thead>
          <tbody>
            @for (sub of submissions(); track sub.id) {
            <tr class="tender-row">
              <td class="table-cell font-bold">{{ sub.supplierId }}</td>
              <td class="table-cell font-mono">{{ sub.price | number:'1.2-2' }}</td>
              <td class="table-cell">
                <div class="score-badge" [class.score-high]="sub.score >= 80" [class.score-low]="sub.score < 50">
                  {{ sub.score | number:'1.1-1' }}
                </div>
              </td>
              <td class="table-cell">
                <div class="rag-text" [title]="sub.ragAnalysis || 'Pas encore analysé'">
                  {{ sub.ragAnalysis || 'En attente d\'analyse...' }}
                </div>
              </td>
              <td class="table-cell">
                <span class="status-badge sub-status-{{sub.status.toLowerCase()}}">
                  {{ sub.status }}
                </span>
              </td>
              <td class="table-cell text-right">
                <div class="action-buttons">
                  <button (click)="viewSubmissionDetails(sub.id)" class="btn-action" title="Détails">
                    <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                  </button>

                  @if (sub.status === SubmissionStatus.SUBMITTED || sub.status === SubmissionStatus.IN_EVALUATION) {
                  <button (click)="updateSubmissionStatus(sub.id, SubmissionStatus.ACCEPTED)"
                    class="btn-action btn-publish" title="Accepter">
                    <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                  </button>
                  <button (click)="updateSubmissionStatus(sub.id, SubmissionStatus.REJECTED)"
                    class="btn-action btn-delete" title="Rejeter">
                    <svg class="btn-icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                  }
                </div>
              </td>
            </tr>
            }
          </tbody>
        </table>
        }
      </div>
    </div>
    }
  </div>

  <!-- Submission Details Modal -->
  @if (showSubmissionModal() && selectedSubmission()) {
  <div class="fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-brutal-black/80 backdrop-blur-sm" (click)="closeSubmissionModal()"></div>
    <div
      class="relative bg-brutal-black border-2 border-white p-8 max-w-2xl w-full shadow-[8px_8px_0px_0px_rgba(255,255,255,1)] max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-start mb-6">
        <div>
          <h3 class="text-xl font-bold uppercase tracking-tight font-space">DÉTAILS DE LA SOUMISSION</h3>
          <p class="text-white/40 text-xs font-mono mt-1">ID: {{ selectedSubmission()!.id }}</p>
        </div>
        <button (click)="closeSubmissionModal()" class="text-white/50 hover:text-white">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <div class="space-y-4">
          <div>
            <span class="text-[10px] uppercase tracking-widest text-white/40 block mb-1">Fournisseur</span>
            <span class="text-white font-bold">{{ selectedSubmission()!.supplierId }}</span>
          </div>
          <div>
            <span class="text-[10px] uppercase tracking-widest text-white/40 block mb-1">Prix Proposé</span>
            <span class="text-xl font-mono text-brutal-neon">{{ selectedSubmission()!.price | number:'1.2-2' }} €</span>
          </div>
          <div>
            <span class="text-[10px] uppercase tracking-widest text-white/40 block mb-1">Délai (jours)</span>
            <span class="text-white font-mono">{{ selectedSubmission()!.deadline }}</span>
          </div>
          <div>
            <span class="text-[10px] uppercase tracking-widest text-white/40 block mb-1">Statut Actuel</span>
            <span class="status-badge sub-status-{{selectedSubmission()!.status.toLowerCase()}}">
              {{ selectedSubmission()!.status }}
            </span>
          </div>
        </div>

        <div class="bg-white/5 p-4 border-l-4 border-brutal-neon">
          <span class="text-[10px] uppercase tracking-widest text-white/40 block mb-2">Score IA Final</span>
          <div class="flex items-end gap-2">
            <span class="text-4xl font-mono font-bold text-brutal-neon">{{ selectedSubmission()!.score | number:'1.1-1'
              }}</span>
            <span class="text-white/30 text-sm mb-1">/ 100</span>
          </div>
          <div class="w-full bg-white/10 h-2 mt-4">
            <div class="h-full bg-brutal-neon" [style.width.%]="selectedSubmission()!.score"></div>
          </div>
        </div>
      </div>

      <div class="mb-8 p-6 bg-white/[0.02] border border-white/10">
        <h4 class="text-xs uppercase tracking-widest text-brutal-neon mb-4">Analyse Comparative (RAG)</h4>
        <p class="text-sm leading-relaxed text-white/80 italic font-serif">
          "{{ selectedSubmission()!.ragAnalysis || 'Analyse en cours par notre moteur IA...' }}"
        </p>
      </div>

      <div class="flex items-center justify-between p-4 bg-white/5 border border-dashed border-white/20 mb-8">
        <div class="flex items-center gap-3">
          <svg class="w-6 h-6 text-white/40" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          <div>
            <span class="text-xs font-bold block">Document Technique</span>
            <span class="text-[10px] text-white/30">{{ selectedSubmission()!.documentId }}</span>
          </div>
        </div>
        <button
          class="px-4 py-2 border border-white hover:bg-white hover:text-brutal-black transition-all text-[10px] font-bold tracking-widest uppercase">
          TÉLÉCHARGER
        </button>
      </div>

      <div class="flex gap-4">
        <button (click)="closeSubmissionModal()"
          class="flex-1 px-4 py-3 border border-white/20 text-white/50 hover:bg-white/5 transition-all uppercase text-xs font-bold tracking-widest">
          FERMER
        </button>

        @if (selectedSubmission()!.status === SubmissionStatus.SUBMITTED || selectedSubmission()!.status ===
        SubmissionStatus.IN_EVALUATION) {
        <button (click)="updateSubmissionStatus(selectedSubmission()!.id, SubmissionStatus.REJECTED)"
          class="flex-1 px-4 py-3 border-2 border-brutal-accent text-brutal-accent hover:bg-brutal-accent hover:text-white transition-all uppercase text-xs font-bold tracking-widest">
          REJETER L'OFFRE
        </button>
        <button (click)="updateSubmissionStatus(selectedSubmission()!.id, SubmissionStatus.ACCEPTED)"
          class="flex-1 px-4 py-3 bg-brutal-neon text-brutal-black hover:bg-brutal-neon/90 transition-all uppercase text-xs font-bold tracking-widest shadow-[4px_4px_0px_0px_rgba(34,255,164,0.3)]">
          ACCEPTER L'OFFRE
        </button>
        }
      </div>
    </div>
  </div>
  }

  <!-- Confirmation Modal Custom -->
  @if (showConfirmModal()) {
  <div class="fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-brutal-black/80 backdrop-blur-sm" (click)="cancelConfirm()"></div>
    <div
      class="relative bg-brutal-black border-2 border-white p-8 max-w-md w-full shadow-[8px_8px_0px_0px_rgba(255,255,255,1)]">
      <h3 class="text-xl font-bold uppercase tracking-tight mb-4 font-space">{{ confirmData()?.title }}</h3>
      <p class="text-white/70 mb-8 leading-relaxed">{{ confirmData()?.message }}</p>
      <div class="flex gap-4">
        <button (click)="cancelConfirm()"
          class="flex-1 px-4 py-3 border border-white/20 text-white/50 hover:bg-white/5 transition-all uppercase text-xs font-bold tracking-widest">
          ANNULER
        </button>
        <button (click)="executeConfirm()"
          class="flex-1 px-4 py-3 bg-white text-brutal-black hover:bg-white/90 transition-all uppercase text-xs font-bold tracking-widest shadow-[4px_4px_0px_0px_rgba(255,255,255,0.3)]">
          CONFIRMER
        </button>
      </div>
    </div>
  </div>
  }

  <!-- Toast Notification System -->
  <div class="fixed top-8 right-8 z-[110] flex flex-col gap-4 pointer-events-none">
    @if (toast().show) {
    <div
      class="pointer-events-auto px-6 py-4 flex items-center gap-4 border-l-4 shadow-xl translate-x-0 transition-all duration-300"
      [class.bg-brutal-black]="true" [class.border-brutal-neon]="toast().type === 'success'"
      [class.border-brutal-accent]="toast().type === 'error'" [class.animate-toast-in]="toast().show">

      @if (toast().type === 'success') {
      <svg class="w-5 h-5 text-brutal-neon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
      } @else {
      <svg class="w-5 h-5 text-brutal-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
      }

      <span class="text-sm font-medium uppercase tracking-wider">{{ toast().message }}</span>
    </div>
    }
  </div>
</div>